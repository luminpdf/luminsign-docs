"use strict";(self.webpackChunkluminsign=self.webpackChunkluminsign||[]).push([[2610],{28453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var r=n(96540);const i={},t=r.createContext(i);function o(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),r.createElement(t.Provider,{value:s},e.children)}},30710:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/app-callback-3f28339ca1bc2bc0d4e124b94e82144a.png"},47136:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"api/webhooks/app-callbacks","title":"App Webhooks","description":"App-level webhooks are connected to specific OAuth 2.0 applications and deliver events only for users who have authorized your app. Events are limited to the scopes granted during OAuth authorization.","source":"@site/docs/beta/api/webhooks/app-callbacks.mdx","sourceDirName":"api/webhooks","slug":"/api/webhooks/app-callbacks","permalink":"/docs/beta/api/webhooks/app-callbacks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"App Webhooks","sidebar_position":3,"sidebar_label":"App Webhooks"},"sidebar":"sidebar","previous":{"title":"Webhooks","permalink":"/docs/beta/category/webhooks"},"next":{"title":"Listen to events","permalink":"/docs/beta/api/webhooks/listen-for-events"}}');var i=n(74848),t=n(28453);const o={title:"App Webhooks",sidebar_position:3,sidebar_label:"App Webhooks"},l="App Webhooks",a={},c=[{value:"Setting up App webhooks",id:"setting-up-app-webhooks",level:2},{value:"Receiving Events",id:"receiving-events",level:2},{value:"Event delivery rules",id:"event-delivery-rules",level:3},{value:"Verify the webhook",id:"verify-the-webhook",level:2},{value:"Respond to Events",id:"respond-to-events",level:2},{value:"Success response",id:"success-response",level:4},{value:"Error handling",id:"error-handling",level:4}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"app-webhooks",children:"App Webhooks"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"App-level webhooks"})," are connected to specific OAuth 2.0 applications and deliver events only for users who have authorized your app. Events are limited to the ",(0,i.jsx)(s.strong,{children:"scopes"})," granted during OAuth authorization."]}),"\n",(0,i.jsxs)(s.p,{children:["This model is best for ",(0,i.jsx)(s.strong,{children:"multi-tenant integrations"}),", such as third-party apps or SaaS platforms, where each app should only receive events for its own authorized users."]}),"\n",(0,i.jsx)(s.h2,{id:"setting-up-app-webhooks",children:"Setting up App webhooks"}),"\n",(0,i.jsx)(s.admonition,{type:"info",children:(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:["Only the ",(0,i.jsx)(s.strong,{children:"Workspace Owner"})," can create or update the App webhook URL."]}),"\n",(0,i.jsxs)(s.li,{children:["This feature is only available for ",(0,i.jsx)(s.strong,{children:"Private (Server) applications"}),"."]}),"\n"]})}),"\n",(0,i.jsx)(s.p,{children:"To configure App webhooks:"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Go to ",(0,i.jsx)(s.strong,{children:"Developer Settings page \u2192 Integration apps tab"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["Click to edit the app you want to configure, or click ",(0,i.jsx)(s.strong,{children:"Create app"})," to create a new app."]}),"\n",(0,i.jsxs)(s.li,{children:["Under ",(0,i.jsx)(s.strong,{children:"Receive events on behalf of users"})," section, enter your Webhook URL (HTTPS required)."]}),"\n",(0,i.jsxs)(s.li,{children:["Click ",(0,i.jsx)(s.strong,{children:"Save"})," button."]}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"image",src:n(30710).A+"",width:"3254",height:"1888"})}),"\n",(0,i.jsx)(s.h2,{id:"receiving-events",children:"Receiving Events"}),"\n",(0,i.jsxs)(s.p,{children:["Once your App webhook is configured, Lumin will automatically send ",(0,i.jsx)(s.strong,{children:"HTTP POST requests"})," to your endpoint when events occur for authorized users."]}),"\n",(0,i.jsxs)(s.p,{children:["App webhooks receive events based on the ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/docs/beta/authorization/oauth2-authentication/scopes",children:"OAuth scopes"})})," granted by users. For a complete list of available events, see ",(0,i.jsx)(s.a,{href:"/docs/api/webhooks/webhook-overview#supported-event-types",children:"Supported event types"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:["All webhook events follow a consistent JSON structure with additional user context. For detailed payload examples, see ",(0,i.jsx)(s.a,{href:"/docs/api/webhooks/webhook-overview#event-payload-structure",children:"Event payload structure"}),"."]}),"\n",(0,i.jsx)(s.h3,{id:"event-delivery-rules",children:"Event delivery rules"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"One request per event"}),": Each event triggers a separate HTTP POST request"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Real-time delivery"}),": Events are delivered as they occur"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"User-scoped coverage"}),": Only events from users who have authorized your app"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Scope-dependent filtering"}),": Events are limited to the scopes granted during OAuth authorization. For example, if your app does not enforce or a user does not grant ",(0,i.jsx)(s.code,{children:"sign:requests.read"}),"/",(0,i.jsx)(s.code,{children:"sign:requests"})," scope, you will not receive signature requests events."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"verify-the-webhook",children:"Verify the webhook"}),"\n",(0,i.jsx)(s.p,{children:"Lumin provides a couple of headers on Webhook requests:"}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"User-Agent"}),": Sender agent. Always ",(0,i.jsx)(s.code,{children:"Lumin Sign API"}),"."]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"X-Signature"}),": A hex digest SHA256 signature of the request's JSON payload, generated using your ",(0,i.jsx)(s.strong,{children:"App's Signing Secret"}),"\nYou can view your app's signing secret in ",(0,i.jsx)(s.strong,{children:"Developer Settings \u2192 Integration apps \u2192 Application details"})," modal."]}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.img,{alt:"image",src:n(84528).A+"",width:"3250",height:"1878"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Verification steps"}),":"]}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Read the ",(0,i.jsx)(s.code,{children:"X-Signature"})," header."]}),"\n",(0,i.jsxs)(s.li,{children:["Compute HMAC-SHA256 with your ",(0,i.jsx)(s.strong,{children:"App's Signing Secret"}),"."]}),"\n",(0,i.jsx)(s.li,{children:"Compare securely with the header value."}),"\n",(0,i.jsx)(s.li,{children:"Reject if mismatch or timestamp expired."}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:'signing_secret=\'your_app_signing_secret\'\njson=\'{"event": { "event_time": 1694664207595, "event_type": "signature_request_sent" }, "signature_request": { "signature_request_id": "fa5c8a0b0f492d768749333ad6fcc214c111e967", "title": "My first request" } }\'\n\necho -n $json | openssl dgst -sha256 -hmac $signing_secret (X-Signature = 3810cb411041efab279d31698b9584372e5ede9d1641fbb354810f16e51be81c)\n'})}),"\n",(0,i.jsx)(s.h2,{id:"respond-to-events",children:"Respond to Events"}),"\n",(0,i.jsx)(s.p,{children:"Your webhook endpoint must respond appropriately to ensure reliable event delivery:"}),"\n",(0,i.jsx)(s.h4,{id:"success-response",children:"Success response"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Return HTTP 200 OK"})," to acknowledge successful receipt"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Respond within 30 seconds"})," to avoid timeout"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"No specific response body required"})," - empty response is acceptable"]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-http",children:"HTTP/1.1 200 OK\nContent-Type: application/json\n\n{}\n"})}),"\n",(0,i.jsx)(s.h4,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"HTTP 4xx/5xx responses"})," will trigger retry attempts"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Timeout responses"})," (>30 seconds) will be retried"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.strong,{children:"Connection failures"})," will be retried with exponential backoff"]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["For detailed retry schedules and failure handling, see ",(0,i.jsx)(s.strong,{children:(0,i.jsx)(s.a,{href:"/docs/api/webhooks/webhook-overview#retry-rules-and-failure-handling",children:"Retry rules and failure handling"})}),"."]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},84528:(e,s,n)=>{n.d(s,{A:()=>r});const r=n.p+"assets/images/application-details-63f758208ee85e07749b101e42dc7675.png"}}]);