"use strict";(self.webpackChunkluminsign=self.webpackChunkluminsign||[]).push([[1572],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var r=s(96540);const i={},o=r.createContext(i);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},36214:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/account-callback-fab87f8354f45628507b651aa413b912.png"},38752:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"webhooks/account-callbacks","title":"Account Webhooks","description":"The account-level webhook notifies you of events happening across your entire Workspace. It is configured under your Workspace\u2019s Developer Settings and secured with your Primary API key.","source":"@site/docs/api/webhooks/account-callbacks.mdx","sourceDirName":"webhooks","slug":"/webhooks/account-callbacks","permalink":"/docs/api/webhooks/account-callbacks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Account Webhooks","sidebar_position":2,"sidebar_label":"Account Webhooks"},"sidebar":"sidebar","previous":{"title":"Overview","permalink":"/docs/api/webhooks/webhook-overview"},"next":{"title":"Test Webhooks with ngrok","permalink":"/docs/api/webhooks/test-webhooks-locally"}}');var i=s(74848),o=s(28453);const t={title:"Account Webhooks",sidebar_position:2,sidebar_label:"Account Webhooks"},c="Account Webhooks",l={},a=[{value:"Setting up Account webhooks",id:"setting-up-account-webhooks",level:2},{value:"Receiving Events",id:"receiving-events",level:2},{value:"Event delivery rules",id:"event-delivery-rules",level:3},{value:"Verify the webhook",id:"verify-the-webhook",level:2},{value:"Respond to Events",id:"respond-to-events",level:2},{value:"Success response",id:"success-response",level:4},{value:"Error handling",id:"error-handling",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"account-webhooks",children:"Account Webhooks"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"account-level webhook"})," notifies you of events happening across your entire Workspace. It is configured under your Workspace\u2019s Developer Settings and secured with your Primary API key."]}),"\n",(0,i.jsxs)(n.p,{children:["This model is best for ",(0,i.jsx)(n.strong,{children:"single-tenant integrations"}),", such as internal tools, where a Workspace admin wants centralized visibility of all activity."]}),"\n",(0,i.jsx)(n.h2,{id:"setting-up-account-webhooks",children:"Setting up Account webhooks"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["Only the ",(0,i.jsx)(n.strong,{children:"Workspace Owner"})," can create or update the Webhook URL."]})}),"\n",(0,i.jsx)(n.p,{children:"To configure Account webhooks:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Go to ",(0,i.jsx)(n.strong,{children:"Developer Settings page \u2192 API Key tab \u2192 Account callback section"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Enter your webhook URL (HTTPS required)."}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.strong,{children:"Save"})," button."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"image",src:s(36214).A+"",width:"3404",height:"1878"})}),"\n",(0,i.jsx)(n.h2,{id:"receiving-events",children:"Receiving Events"}),"\n",(0,i.jsxs)(n.p,{children:["Once your Account webhook is configured, Lumin will automatically send ",(0,i.jsx)(n.strong,{children:"HTTP POST requests"})," to your endpoint when events occur."]}),"\n",(0,i.jsxs)(n.p,{children:["Account webhooks receive all supported event types across your entire Workspace. For a complete list of available events, see ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/api/webhooks/webhook-overview#supported-event-types",children:"Supported event types"})}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["All webhook events follow a consistent JSON structure. For detailed payload examples, see ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/api/webhooks/webhook-overview#event-payload-structure",children:"Event payload structure"})}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"event-delivery-rules",children:"Event delivery rules"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"One request per event"}),": Each event triggers a separate HTTP POST request"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Real-time delivery"}),": Events are delivered as they occur"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Workspace-wide coverage"}),": All events triggered by any API keys in your Workspace"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No filtering"}),": You receive all event types - there's no opt-out mechanism"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"verify-the-webhook",children:"Verify the webhook"}),"\n",(0,i.jsx)(n.p,{children:"Lumin provides a couple of headers on Webhook requests:"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"User-Agent"}),": Sender agent. Always ",(0,i.jsx)(n.code,{children:"Lumin Sign API"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"X-Signature"}),": A hex digest SHA256 signature of the request's JSON payload, generated using your ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/api/authentication/#multiple-api-keys",children:"Primary API key"})}),"."]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Verification steps"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Read the ",(0,i.jsx)(n.code,{children:"X-Signature"})," header."]}),"\n",(0,i.jsxs)(n.li,{children:["Compute HMAC-SHA256 with your ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/api/authentication/#multiple-api-keys",children:"Primary API key"})}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Compare securely with the header value."}),"\n",(0,i.jsx)(n.li,{children:"Reject if mismatch or timestamp expired."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'api_key=\'my_primary_api_key\'\njson=\'{"event": { "event_time": 1694664207595, "event_type": "signature_request_sent" }, "signature_request": { "signature_request_id": "fa5c8a0b0f492d768749333ad6fcc214c111e967", "title": "My first request" } }\'\n\necho -n $json | openssl dgst -sha256 -hmac $api_key (X-Signature = 3810cb411041efab279d31698b9584372e5ede9d1641fbb354810f16e51be81c)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"respond-to-events",children:"Respond to Events"}),"\n",(0,i.jsx)(n.p,{children:"Your webhook endpoint must respond appropriately to ensure reliable event delivery:"}),"\n",(0,i.jsx)(n.h4,{id:"success-response",children:"Success response"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Return HTTP 200 OK"})," to acknowledge successful receipt"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Respond within 30 seconds"})," to avoid timeout"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"No specific response body required"})," - empty response is acceptable"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"HTTP/1.1 200 OK\nContent-Type: application/json\n\n{}\n"})}),"\n",(0,i.jsx)(n.h4,{id:"error-handling",children:"Error handling"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"HTTP 4xx/5xx responses"})," will trigger retry attempts"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Timeout responses"})," (>30 seconds) will be retried"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Connection failures"})," will be retried with exponential backoff"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For detailed retry schedules and failure handling, see ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/api/webhooks/webhook-overview#retry-rules-and-failure-handling",children:"Retry rules and failure handling"})}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);