"use strict";(self.webpackChunkluminsign=self.webpackChunkluminsign||[]).push([[3891],{2795:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"authorization/oauth2-authentication/private-authorization-code","title":"Private Authentication Code Grant Flow","description":"The Private Authorization Code Grant is an OAuth 2.0 flow for confidential (server-based) applications. It securely exchanges an authorization code for an access token and a refresh token.","source":"@site/docs/beta/authorization/oauth2-authentication/private-authorization-code.mdx","sourceDirName":"authorization/oauth2-authentication","slug":"/authorization/oauth2-authentication/private-authorization-code","permalink":"/docs/beta/authorization/oauth2-authentication/private-authorization-code","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Private Authentication Code Grant Flow","sidebar_position":2},"sidebar":"sidebar","previous":{"title":"Creating an OAuth 2.0 application","permalink":"/docs/beta/authorization/oauth2-authentication/creating-oauth2-application"},"next":{"title":"Public Authentication Code Grant Flow","permalink":"/docs/beta/authorization/oauth2-authentication/public-authorization-code"}}');var r=n(74848),a=n(28453);const o={title:"Private Authentication Code Grant Flow",sidebar_position:2},s="Private Authentication Code Grant Flow",c={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step-by-step walkthrough",id:"step-by-step-walkthrough",level:2},{value:"Step 1: Get an Authorization Code",id:"step-1-get-an-authorization-code",level:3},{value:"Example Request",id:"example-request",level:4},{value:"Step 2: Exchange Authorization Code for Tokens",id:"step-2-exchange-authorization-code-for-tokens",level:3},{value:"Example Request",id:"example-request-1",level:4},{value:"Response",id:"response",level:4},{value:"Step 3: Call Lumin APIs with Bearer Token",id:"step-3-call-lumin-apis-with-bearer-token",level:3},{value:"Step 4: Refresh the Access Token",id:"step-4-refresh-the-access-token",level:3}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"private-authentication-code-grant-flow",children:"Private Authentication Code Grant Flow"})}),"\n",(0,r.jsxs)(t.p,{children:["The ",(0,r.jsx)(t.strong,{children:"Private Authorization Code Grant"})," is an OAuth 2.0 flow for confidential (server-based) applications. It securely exchanges an ",(0,r.jsx)(t.strong,{children:"authorization code"})," for an ",(0,r.jsx)(t.strong,{children:"access token"})," and a ",(0,r.jsx)(t.strong,{children:"refresh token"}),"."]}),"\n",(0,r.jsxs)(t.p,{children:["Your app ",(0,r.jsx)(t.strong,{children:"must be server-side"})," because the flow requires the ",(0,r.jsx)(t.strong,{children:"Client Secret"}),", which must always be kept secure on your server."]}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsxs)(t.li,{children:["A Private (Confidential) OAuth 2.0 application has been created in Lumin. See: ",(0,r.jsx)(t.a,{href:"/docs/beta/authorization/oauth2-authentication/creating-oauth2-application",children:"Creating an OAuth 2.0 Application in Lumin"})]}),"\n",(0,r.jsxs)(t.li,{children:["You have the following values from the Developer settings page:","\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Client ID"})}),"\n",(0,r.jsx)(t.li,{children:(0,r.jsx)(t.strong,{children:"Client Secret"})}),"\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Redirect URI"})," (must exactly match one of the URIs registered for your app)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.h2,{id:"step-by-step-walkthrough",children:"Step-by-step walkthrough"}),"\n",(0,r.jsx)(t.h3,{id:"step-1-get-an-authorization-code",children:"Step 1: Get an Authorization Code"}),"\n",(0,r.jsx)(t.p,{children:"Your app must first redirect the user to the Lumin authorization endpoint to request consent."}),"\n",(0,r.jsx)(t.h4,{id:"example-request",children:"Example Request"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"GET https://auth.luminpdf.com/oauth2/auth?\nclient_id=YOUR_CLIENT_ID&\nresponse_type=code&\nredirect_uri=YOUR_REDIRECT_URI&\nscope=openid offline_access sign:requests&\nstate=state&\nnonce=nonce\n"})}),"\n",(0,r.jsxs)(t.p,{children:["After the user approves the request, Lumin redirects them back to your ",(0,r.jsx)(t.code,{children:"redirect_uri"})," with an ",(0,r.jsx)(t.code,{children:"authorization code"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"step-2-exchange-authorization-code-for-tokens",children:"Step 2: Exchange Authorization Code for Tokens"}),"\n",(0,r.jsx)(t.p,{children:"Once you have the code, exchange it for an access token and refresh token by making a server-to-server POST request."}),"\n",(0,r.jsx)(t.h4,{id:"example-request-1",children:"Example Request"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"curl --request POST \\\n--url https://auth.luminpdf.com/oauth2/token \\\n-d 'grant_type=authorization_code' \\\n-d 'code=$YOUR_AUTHORIZATION_CODE' \\\n-d 'client_id=$YOUR_CLIENT_ID' \\\n-d 'client_secret=$YOUR_CLIENT_SECRET' \\\n-d 'redirect_uri=$YOUR_REDIRECT_URI' \\\n--header 'Content-Type: application/x-www-form-urlencoded'\n"})}),"\n",(0,r.jsx)(t.h4,{id:"response",children:"Response"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-json",children:'{\n  "access_token": "eyJhbGci0i...",\n  "expires_in": 3600,\n  "refresh_token": "def502...",\n  "token_type": "bearer",\n  "scope": "openid offline_access sign:requests"\n}\n'})}),"\n",(0,r.jsx)(t.h3,{id:"step-3-call-lumin-apis-with-bearer-token",children:"Step 3: Call Lumin APIs with Bearer Token"}),"\n",(0,r.jsxs)(t.p,{children:["Include the access token in the ",(0,r.jsx)(t.code,{children:"Authorization"})," header of your API calls."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"curl --request GET \\\n--url https://api.luminpdf.com/v1/signature_request/send \\\n--header 'Authorization: Bearer $ACCESS_TOKEN' \\\n--header 'Content-Type: application/json'\n"})}),"\n",(0,r.jsx)(t.h3,{id:"step-4-refresh-the-access-token",children:"Step 4: Refresh the Access Token"}),"\n",(0,r.jsxs)(t.p,{children:["Access tokens expire after a short time (e.g., 1 hour). Use the ",(0,r.jsx)(t.code,{children:"refresh_token"})," to obtain a new access token without requiring user interaction."]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"curl --request POST \\\n--url https://auth.luminpdf.com/oauth2/token \\\n-d 'grant_type=refresh_token' \\\n-d 'refresh_token=$YOUR_REFRESH_TOKEN' \\\n-d 'client_id=$YOUR_CLIENT_ID' \\\n-d 'client_secret=$YOUR_CLIENT_SECRET' \\\n--header 'Content-Type: application/x-www-form-urlencoded'\n"})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>s});var i=n(96540);const r={},a=i.createContext(r);function o(e){const t=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);